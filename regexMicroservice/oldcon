console.log(`Connection received: ${request.url}`);

    let token = parseUrl(request.url);
    let validToken = validateToken(token);

    if(!validToken) {
        ws.close()
    }

    ws.send(JSON.stringify({
        msg: "Auth completed, you have 5 queries total"
    }))

    clients.push({
        socket: ws,
        token: token,
        tries: 5
    });
    
    ws.on('message', wss.broadcast);

    ws.on('close', e => {
        console.log(`Disconnection: ${ws}`);
        clients.splice(clients.indexOf(clients.find(elem => elem.socket == ws)), 1);
    })